<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
{#    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">#}
    <script src="https://kit.fontawesome.com/05de84e1ca.js" crossorigin="anonymous"></script>
    <style>
        body {
            color: #444747;
            background-image: url('/static/images/ocean.jpg');
            {#background-repeat: no-repeat;#}
            {#background-size: cover;#}
            {#font-family: "Heiti SC", sans-serifserif;#}
            {#display: flex;#}
            height: 100vh;
            margin: 0;
            padding: 0;
        }

        i.far {
            color : #1ee0da
        }
    </style>
    <title>Question</title>

</head>
<body>
    <h2>QUESTION: {{ question.title }}</h2>

    <h3>{{ question.message }}</h3>
        {% if question.image %}
            {% if 'http' not in question.image %}
                <img src="{{ url_for('get_img', filename=get_filename(question.image)) }}" alt="picture added by user" style="max-width: 25%">
    {#        <img src="/static/{{ question.image }}" alt="picture added by user" style="max-width: 25%"> dla naszych obrazk√≥w#}
            {% else %}
                <img src="{{ question.image }}" alt="picture added by user" style="max-height: 25vw">
            {% endif %}
        {% endif %}

        {% for tags in question_tag %}
                <tr>
                    <td>#{{ tags.name }}</td>
                </tr>
                <a href="{{ url_for('delete_tag', tag_id=tags.id) }}" onclick="return confirm('Are you sure?')">
                                        <i class='far fa-trash-alt'></i>
                </a><br>
        {% endfor %}

            <p>Submission time: {{ question.submission_time }}, Numbers of views: {{ question.view_number }}</p>
{#        <p>Submission time: {{ display_time(question.submission_time) }}, Numbers of views: {{ question.view_number }}</p>#}
            <p>Vote's number: {{ question.vote_number }}
                <form action="{{ url_for("question_vote", question_id=question.id) }}" method="post">
                    <button type="submit" id="vote_up" name = "vote_question" value="vote_up">VOTE UP</button>
                    <button type="submit" id="vote_down" name = "vote_question" value="vote_down">VOTE DOWN</button>
                </form>

            </p>

    <p>
        <a href="{{ url_for("add_tag", question_id=question.id) }}">
            <button type="button" name="add_tag" id="add_question_tag">ADD TAG</button></a>
        <a href="{{ url_for("new_question_comment", question_id=question.id) }}">
            <button type="button" name="add_comment" id="add_question_comment">ADD COMMENT</button></a>
        <a href="{{ url_for("add_answer",question_id=question.id) }}">
            <button type="button" name="add_answer" id="add_answer" >ADD ANSWER</button></a>
        <a href="{{ url_for("edit_question_get",question_id=question["id"]) }}"><i class='far fa-edit'></i>
        </a><a href="{{ url_for("delete_question", question_id = question["id"]) }}"><i class='far'>&#xf2ed</i>
        </a><br>
    </p>

            <p>
                {% if question_comments|length > 0 %}
                <table border="1" style="margin-left: 40px">
                    <thead><strong>COMMENTS</strong></thead>

                        <tr>
                            {% for comment_header in comment_headers %}
                                <th>{{ comment_header }}</th>
                            {% endfor %}
                        </tr>
                    <tbody>

                        {% for comment in question_comments %}
                            <tr>
                                <td>{{ comment.submission_time }}</td>
                                <td>{{ comment.message }}</td>
                                <td>
                                    {% if comment.edited_count %}
                                        Edited {{ comment.edited_count }} time(s)
                                    {% endif %}
                                </td>
                                <td>
                                    <a href="{{ url_for('update_comment_get', comment_id=comment.id) }}">
                                        <i class='far fa-edit'></i>
                                    </a>
                                    <a href="{{ url_for('delete_comment', comment_id=comment.id) }}" onclick="return confirm('Are you sure?')">
                                        <i class='far fa-trash-alt'></i>
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% endif %}
            </p>


    <p>

    {% if answers|length > 0 %}
        <table border="1" style="margin-left: 40px">
            <thead><strong>ANSWERS:</strong></thead>
                <tr>
                    {% for item in answers_headers %}
                        <th>{{ item }}</th>
                    {% endfor %}
                </tr>
            <tbody>
                {% for answer in answers %}
                <tr>
                    <td>{{ answer.vote_number }}</td>
                    <td>{{ answer.message }}<br>
                        {% if answer.image %}
                            {% if 'http' not in answer.image %}
                                <img src="{{ url_for("get_img",filename=get_filename(answer.image)) }}" alt="picture added by user" style="width: 256px"></td>
                            {% else %}
                                <img src="{{ answer.image }}" alt="picture added by user" style="width: 256px"></td>
                            {% endif %}
                        {% endif %}
                    <td>{{ answer.submission_time }}</td>
                    <td>
                        <form action="{{ url_for("answer_vote", answer_id=answer.id, question_id=question["id"]) }}" method="post">
                            <button type="submit" id="vote_up" name = "vote_answer" value="vote_up">VOTE UP</button><br><br>
                            <button type="submit"  id="vote_down" name = "vote_answer" value="vote_down">VOTE DOWN</button>
                        </form></td>
                    <td>
                        <a href="{{ url_for("new_answer_comment", answer_id=answer.id) }}">
                            <button type="button" name="add_comment" id="add_answer_comment">ADD COMMENT</button></a><br>
                        <a href="{{ url_for("edit_answer_get", question_id=question.id, answer_id=answer.id) }}">
                            <i class='far fa-edit'></i></a>
                        <a href="{{ url_for("delete_answer",question_id=question.id, answer_id=answer.id) }}"><i class='far fa-trash-alt'></i></a>
                    </td>
                </tr>
                {% if answer_comments|length > 0 %}
                <tr>
                    <td></td>
                    <td colspan="4">
                        <p>
{#                            {% if answer_comments|length > 0 %}#}
                            <table border="1" style="margin-left: 40px">
                                <thead><strong>COMMENTS</strong></thead>

                                    <tr>
                                        {% for comment_header in comment_headers %}
                                            <th>{{ comment_header }}</th>
                                        {% endfor %}
                                    </tr>
                                <tbody>

                                    {% for comment in answer_comments %}
                                        {% if comment.answer_id == answer.id %}
                                            <tr>
                                                <td>{{ comment.submission_time }}</td>
                                                <td>{{ comment.message }}</td>
                                                <td>Edited {{ comment.edited_count }} time(s)</td>
                                                <td>
                                                    <a href="{{ url_for('update_comment_get', comment_id=comment.id) }}"><i class='far fa-edit'></i>
                                                    </a>

                                                    <a href="{{ url_for('delete_comment', comment_id=comment.id) }}"
                                                       onclick="return confirm('Are you sure?')"><i class='far fa-trash-alt'></i>
                                                    </a>
                                                </td>
                                            </tr>
                                        {% endif %}
                                    {% endfor %}
                                </tbody>
                            </table>
{#                            {% endif %}#}
                        </p>
                    </td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
    </p>
<a href="{{ url_for("question_page") }}">Back to List of questions</a>


</body>
<footer><small>The most tailored answers for Your question</small></footer>
</html>